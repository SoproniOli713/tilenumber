"use strict";function Tile(){this.container=$(".tile-container"),this.disp_score=$(".disp-score"),this.disp_tile=$(".disp-tile"),this.disp_life=$(".disp-life"),this.count_find=this.matrix=this.ctrCount=4,this.ctrCorrect=0,this.myarr=null,this.numToFind=null,this.score=0,this.life=1,this.roundConsecutive=0,this.start()}Tile.prototype={start:function(){var t=this;this.numToFind=0,this.next_level_pop_up("start"),window.setTimeout(function(){t.create_matrix(),t.show_tile()},1e3)},ready:function(t){var i=this;(0==t||"start"==t)&&i.reset_all(),this.update_tile_display(this.count_find),this.empty_container(),this.get_find_number(),window.setTimeout(function(){i.hide_find_number(),window.setTimeout(function(){i.empty_container(),i.create_matrix(),i.show_tile(),i.bind()},1e3)},1500)},empty_container:function(){this.container.empty()},get_find_number:function(){var t=this.getRandomInt(1,10);this.numToFind=t,this.show_find_number(t)},show_find_number:function(t){var i=$("<div/>"),n=$("<div/>"),e=$("<p/>"),a=$("<p/>"),s=$("<p/>");n.attr("class","num-find"),i.attr("class","num-find-container"),a.attr("class","p-divider"),n.append(e.html("Number to Find")),n.append(a),n.append(s.html(t)),n.append(a.clone()),n.append(e.clone().html("Number of Tiles")),n.append(a.clone()),n.append(s.clone().html(this.count_find)),i.append(n),this.container.append(i.hide().fadeIn("500")),i=null,n=null},hide_find_number:function(){this.container.find(".num-find-container").addClass("anim-find-number")},create_matrix:function(){var t=Math.pow(this.matrix,2);this.create_number_array(t);var i=this.matrix.toString(),n=0,e=$("<div/>"),a=$("<div/>"),s=$("<div/>"),o=$("<div/>"),r="dim-"+i+"x"+i;for(a.attr("class","tile "+r),o.attr("class","shield"),s.attr("class","numbers"),a.append(s),a.append(o),n;t>n;n++){var l=a.clone();l.find("div").first().html(this.myarr[n]),e.append(l)}this.container.append(e.html())},show_tile:function(){var t=this;window.setTimeout(function(){t.container.find(".shield").removeClass("shield").addClass("anim"),t.remove_numbers()},1e3*t.matrix)},remove_numbers:function(){var t=this;window.setTimeout(function(){t.container.find(".numbers").empty()},1e3)},bind:function(){var t=this;this.container.off().on("click",".anim",function(i){i.preventDefault(),i.stopPropagation(),t.ctrCount>0&&(t.ctrCount--,t.update_tile_display(t.ctrCount),t.animate_tile_open(i))})},update_tile_display:function(t){console.log("haha"),this.disp_tile.html(t)},update_score_display:function(t){this.score+=t,this.disp_score.html(this.score)},update_life_display:function(t){this.life+=t,this.disp_life.html(this.life)},update_all_display:function(t,i,n){this.update_score_display(t),this.update_tile_display(i),this.update_life_display(n)},animate_tile_open:function(t){var i=$(t.target),n=i.parent(),e=n.index(),a=this.myarr[e];this.check_open_tile(a,n),n.find(".numbers").html(a);var s="anim"+this.matrix.toString()+"x"+this.matrix.toString();i.removeClass("anim").addClass(s),0==this.ctrCount&&this.finish_open_all_tiles()},check_open_tile:function(t,i){t==this.numToFind?(this.ctrCorrect++,this.update_score_display(100),i.addClass("tile-active")):i.addClass("b-red")},finish_open_all_tiles:function(){var t=this,i=this.container.find(".tile");i.each(function(i,n){$(n).find(".numbers").html(t.myarr[i])});var n=this.container.find(".anim"),e="anim"+this.matrix.toString()+"x"+this.matrix.toString();window.setTimeout(function(){n.removeClass("anim").addClass(e),t.next_level()},1e3)},next_level:function(){var t=this;if(t.count_find==t.ctrCorrect?(t.count_find=t.ctrCount=t.count_find+1,t.roundConsecutive++,t.roundConsecutive>2&&(this.update_life_display(1),t.roundConsecutive=0)):(t.count_find>t.matrix?t.count_find=t.ctrCount=t.count_find-1:t.ctrCount=t.count_find,this.update_life_display(-1),t.roundConsecutive=0),0==t.life)return void window.setTimeout(function(){t.animate_finish(4),t.next_level_pop_up(!1)},1e3);t.ctrCorrect=0;var i=Math.pow(t.matrix,2);if(t.count_find>i){var n=t.matrix+1;t.animate_finish(n),t.next_level_pop_up()}else window.setTimeout(function(){t.ready()},2e3)},next_level_pop_up:function(t){var i=$("<div/>");i.addClass("level-up-pop-container level-up-pop-top");var n=$("<div/>");n.addClass("level-up-pop");var e=$("<p/>");e.addClass("b-red"),e.html("LEVEL UP");var a=$("<p/>");a.addClass("p-divider");var s=$("<div/>");s.addClass("level-go"),s.html("GO"),0==t?(e.html("GAME COMPLETE"),s.html("TRY AGAIN")):"start"==t&&(e.html("WELCOME"),s.html("START")),n.append(e),n.append(a),n.append(s),i.append(n),this.container.append(i);var o=this;window.setTimeout(function(){o.container.find(".level-up-pop-container").removeClass("level-up-pop-top").addClass("level-up-anim")},1e3),this.container.off().on("click",".level-go",function(){o.count_find=o.ctrCount=o.matrix,o.container.find(".level-up-pop-container").removeClass("level-up-anim").addClass("level-up-exit"),window.setTimeout(function(){o.ready(t)},1e3)}),i=null,n=null,e=null,a=null,s=null},animate_finish:function(t){var i="anim"+this.matrix.toString()+"x"+this.matrix.toString();this.matrix=t;var n=this.container.find("."+i);n.removeClass(i).addClass("anim-next b-green")},create_number_array:function(t){for(var i=new Array,n=0;n<this.count_find;n++)i.push(this.numToFind);for(var e=t-this.count_find;e>0;){var a=this.getRandomInt(1,10);a!==this.numToFind&&(i.push(a),e--)}var s=this.shuffleArray(i);this.myarr=s},getRandomInt:function(t,i){return Math.floor(Math.random()*(i-t))+t},shuffleArray:function(t){for(var i=t.length-1;i>0;i--){var n=Math.floor(Math.random()*(i+1)),e=t[i];t[i]=t[n],t[n]=e}return t},reset_all:function(){this.count_find=this.matrix=this.ctrCount=4,this.ctrCorrect=0,this.myarr=null,this.numToFind=null,this.score=0,this.life=3,this.roundConsecutive=0,this.update_all_display(this.score,this.count_find,0)}};var tile=new Tile;